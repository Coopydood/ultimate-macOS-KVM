## Extras
### extras.py

> [!WARNING]
> This script should not be run on its own. 
> 
> It should be run through the `main.py` file instead. Use the **E** option at the main menu.

<img src="https://github.com/Coopydood/ultimate-macOS-KVM/assets/39441479/3b68543b-553a-49f0-bc74-55fc6982fc11" width="70%"></img>

This page will go over some of the features in the Extras menu, without too much detail.

***

## 1. Create and import XML file

This option allows you to automatically convert a QEMU config script previously generated by AutoPilot into an XML file compatible with **virt-manager** (Virtual Machine Manager), which is a GUI frontend that makes management of your VMs easier and nicer to work with. 

After conversion, you'll have the option to automatically import the XML file into virt-manager.

To learn more about the XML Converter, visit [this page](https://github.com/Coopydood/ultimate-macOS-KVM/wiki/XML-Converter).

***

## 2. OpenCore Configuration Assistant

This tool allows you to mount your virtual OpenCore image as a disk on your host system, allowing you to edit the contents without ever booting your VM.

***

## 3. macOS Boot Argument Editor

This tool allows you to seamlessly edit your macOS OpenCore boot arguments - letting you apply patches for things like GPU output.

It even includes a feature called **AutoPatch**, containing a list of known boot argument patches. You can select one, and the tool will instantly apply the relevant boot patch for your system. For example, you can apply the **Navi RX 5000 / 6000 black screen** patch automatically!

For more on this, and available patches, visit [this page](https://github.com/Coopydood/ultimate-macOS-KVM/wiki/macOS-Boot-Argument-Editor).

***

## 4. GRUB Argument Editor

For users who use GRUB to boot their host's Linux install, setting the right kernel parameters can sometimes be a daunting mess. With this tool, most of this stress is taken care of automatically, through the auto-configuration of parameters **based on your specific system!**

Created by @Hyperchromiac.

***

## 5. Generate SMBIOS / Serial Number

ULTMOS now has built-in support for CorpNewt's [GenSMBIOS](https://github.com/corpnewt/GenSMBIOS) script, allowing you to automatically change your OpenCore's SMBIOS model and serial number - so you can customise the virtual Mac model and log into iServices, etc.

***

## C. Cleanup Tools...

This utility provides several options for cleaning up temporary files or uninstalling ULTMOS, accessible via the interactive menu or command-line flags.

**Interactive Menu Options:**

1.  **Show detected components**: Displays found VMs and disk images.
2.  **Remove VMs only**: Removes VM definitions from libvirt. It will prompt whether to also delete associated disk images.
3.  **Clean temporary files only**: Removes logs, temporary files, and stale blobs.
4.  **Clean VMs and temporary files**: Combines options 2 and 3.
5.  **Uninstall but keep disks**: Initiates the self-destruct process to remove ULTMOS but backs up disk images first.
6.  **Uninstall everything**: Initiates the self-destruct process to remove ULTMOS *and* all associated disk images.

**Command-Line Flags:**

The script [`scripts/kunihir0/cleanup.py`](scripts/kunihir0/cleanup.py) can be run directly with flags for specific non-interactive actions:
- `./scripts/kunihir0/cleanup.py --temp-only`: Clean only temporary files and exit.
- `./scripts/kunihir0/cleanup.py --vm-only`: Remove only VM definitions (will prompt about associated disks unless `--force` is used) and exit.
- Add `--force` to skip confirmation prompts (Use with extreme caution!).
- Add `--dry-run` to simulate actions without making changes.
- The `--keep-disks` flag influences the behavior of the full uninstall options (interactive or future non-interactive flags) and the `--vm-only` flag when used with `--force`.

> [!WARNING]
> The uninstall functions (options 5 & 6 in the menu) are permanent and cannot be undone. They use a self-destructing mechanism that removes the entire ULTMOS directory.
>
> Virtual disk backups (if the "keep disks" option is chosen) will be stored in your home directory in a timestamped folder like `~/ultmos_backups_YYYYMMDD-HHMMSS`.
>
> The uninstaller automatically detects and offers to remove associated libvirt VM definitions during the uninstall process.

***

## R. Restore tools...

This opens a seperate menu providing options to restore various parts of the repository to defaults.

Great for troubleshooting common issues and covering up your mess.

***

## I. Report an issue...

Opens a new issue page on the GitHub repo in your default browser.

***

<img src="https://github.com/Coopydood/ultimate-macOS-KVM/assets/39441479/ef278407-a14f-4ae7-bc23-3f635687db65" width="25%"> 

<sub>Written and maintained by **Coopydood**. </sub>
<br><sub>You can [contribute](https://github.com/Coopydood/ultimate-macOS-KVM/new/dev/docs) to documentation, too!</sub>